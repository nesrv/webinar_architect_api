# Игра "Морской бой" на SOAP API

Этот пример демонстрирует создание классической игры "Морской бой" с использованием SOAP API. Игра позволяет пользователю соревноваться с компьютером, размещая корабли на поле и пытаясь потопить корабли противника.

## Особенности игры

- **Классические правила** морского боя на поле 10x10
- **Автоматическое размещение кораблей** для игрока и компьютера
- **Сохранение состояния игры** на сервере
- **Поддержка нескольких игровых сессий** одновременно
- **Визуальное отображение** игрового поля в консоли

## Запуск игры

1. Установите необходимые библиотеки:
   ```bash
   pip install spyne lxml zeep
   ```

2. Запустите SOAP-сервер:
   ```bash
   python battleship_soap_server.py
   ```

3. В другом терминале запустите клиент:
   ```bash
   python battleship_soap_client.py
   ```

## Модели данных

### Coordinate (Координата)
- `x` - координата по горизонтали (0-9)
- `y` - координата по вертикали (0-9)

### Ship (Корабль)
- `id` - уникальный идентификатор корабля
- `size` - размер корабля (1-4 клетки)
- `coordinates` - массив координат, занимаемых кораблем
- `hits` - количество попаданий по кораблю

### GameBoard (Игровое поле)
- `ships` - массив кораблей на поле
- `shots` - массив выстрелов по полю

### GameState (Состояние игры)
- `game_id` - уникальный идентификатор игры
- `player_board` - игровое поле игрока
- `computer_board` - игровое поле компьютера
- `player_turn` - флаг, указывающий, чей сейчас ход
- `game_over` - флаг завершения игры
- `winner` - победитель (player/computer)
- `message` - сообщение о текущем состоянии игры

## Операции SOAP API

### Управление игрой
- `new_game()` - создать новую игру
- `get_game_state(game_id)` - получить текущее состояние игры
- `player_shot(game_id, x, y)` - сделать выстрел по координатам (x, y)

## Пример SOAP-запроса (XML)

Запрос на создание новой игры:

```xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bat="http://battleship.example.com/soap">
   <soapenv:Header/>
   <soapenv:Body>
      <bat:new_game/>
   </soapenv:Body>
</soapenv:Envelope>
```

Запрос на выстрел:

```xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bat="http://battleship.example.com/soap">
   <soapenv:Header/>
   <soapenv:Body>
      <bat:player_shot>
         <bat:game_id>550e8400-e29b-41d4-a716-446655440000</bat:game_id>
         <bat:x>5</bat:x>
         <bat:y>3</bat:y>
      </bat:player_shot>
   </soapenv:Body>
</soapenv:Envelope>
```

## Правила игры

1. Игра происходит на двух полях 10x10 клеток
2. На каждом поле размещаются:
   - 1 корабль размером 4 клетки
   - 2 корабля размером 3 клетки
   - 3 корабля размером 2 клетки
   - 4 корабля размером 1 клетка
3. Корабли не могут соприкасаться друг с другом (даже по диагонали)
4. Игроки по очереди делают выстрелы по полю противника
5. При попадании в корабль игрок получает право на дополнительный ход
6. Побеждает тот, кто первым потопит все корабли противника

## Обозначения на игровом поле

- `~` - пустая клетка (вода)
- `O` - корабль игрока (видны только на поле игрока)
- `·` - промах (выстрел в пустую клетку)
- `X` - попадание (выстрел в корабль)

## Преимущества использования SOAP для данного примера

1. **Строгая типизация данных** - гарантирует корректность передаваемых координат и состояния игры
2. **Сохранение состояния на сервере** - позволяет продолжить игру после перезапуска клиента
3. **Четкое определение игровых операций** через WSDL
4. **Возможность создания различных клиентов** (консольный, веб, мобильный) для одного API
5. **Безопасность** - все игровые данные хранятся на сервере, что предотвращает читерство

## Возможные улучшения

- Добавление возможности ручного размещения кораблей
- Реализация более умной стратегии для компьютера
- Добавление многопользовательского режима (игрок против игрока)
- Создание веб-интерфейса с визуальным отображением игрового поля
- Добавление системы рейтинга и статистики игроков
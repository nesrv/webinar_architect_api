### **–£—Ä–æ–∫: Solution Architecture –∏ System Design - –í–≤–µ–¥–µ–Ω–∏–µ**  
**–°–≤—è–∑—å —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —É—Ä–æ–∫–∞–º–∏:**  
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–Ω–∞–Ω–∏–π –æ REST, gRPC, Event-based API –∏ RabbitMQ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1 —á–∞—Å  
**–£—Ä–æ–≤–µ–Ω—å:** –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π  
**–§–æ—Ä–º–∞—Ç:** –¢–µ–æ—Ä–∏—è + –ö–µ–π—Å-—Å—Ç–∞–¥–∏  

---

## **1. –û—Å–Ω–æ–≤—ã Solution Architecture **  
### **1.1 –ß—Ç–æ —Ç–∞–∫–æ–µ Solution Architecture?**  
**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**  
–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á —Å —É—á–µ—Ç–æ–º:  
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏  
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç–∏  
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏  
- –°—Ç–æ–∏–º–æ—Å—Ç–∏  

**–°–≤—è–∑—å —Å –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º:**  
| **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è**       | **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ä–æ–ª—å**               |  
|----------------------|--------------------------------------|  
| REST API             | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤       |  
| gRPC                 | –í–Ω—É—Ç—Ä–∏—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è         |  
| RabbitMQ             | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π        |  
| Event-based API      | –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ |  

### **1.2 –ü—Ä–∏–Ω—Ü–∏–ø—ã System Design**  
1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã vs –ú–æ–Ω–æ–ª–∏—Ç (–∫–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å)  
2. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏  
3. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** Circuit Breaker, Retry-–ª–æ–≥–∏–∫–∞  
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤  

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ø—Ä–æ—à–ª—ã—Ö —É—Ä–æ–∫–æ–≤:**  
```mermaid
graph LR
    A[–ö–ª–∏–µ–Ω—Ç] -->|REST| B[API Gateway]
    B -->|gRPC| C[–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤]
    B -->|WebSocket| D[–ß–∞—Ç-—Å–µ—Ä–≤–∏—Å]
    C --> E[RabbitMQ]
    E --> F[–°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç–∞–≤–∫–∏]
    E --> G[–°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏]
```

---

## **2. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å: –î–∏–∑–∞–π–Ω –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –µ–¥—ã **  
### **2.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**  
- 1000 –∑–∞–∫–∞–∑–æ–≤/–º–∏–Ω  
- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—É—Ä—å–µ—Ä–æ–≤  
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º  
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  

### **2.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**  
1. **API Gateway (FastAPI):**  
   - REST –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤  
   - WebSocket –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –∫—É—Ä—å–µ—Ä–æ–≤  
2. **–°–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤ (gRPC):**  
   - –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤  
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏  
3. **Event Bus (RabbitMQ):**  
   - `order_created` ‚Üí –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
   - `courier_location` ‚Üí –ì–µ–æ—Å–µ—Ä–≤–∏—Å  
4. **–ö—ç—à (Redis):**  
   - –ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤  
   - –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤  

**–°—Ö–µ–º–∞:**  
```mermaid
graph TD
    A[–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] -->|REST| B[API Gateway]
    B -->|gRPC| C[Order Service]
    C -->|AMQP| D[RabbitMQ]
    D --> E[Notification Service]
    D --> F[Analytics Service]
    B -->|WebSocket| G[Tracking Service]
    G --> H[Redis Geospatial]
```

### **2.3 –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º**  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ –æ–±–µ–¥  
**–†–µ—à–µ–Ω–∏–µ:**  
- –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ Kubernetes –¥–ª—è Order Service  
- Priority Queue –≤ RabbitMQ –¥–ª—è VIP-–∑–∞–∫–∞–∑–æ–≤  
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é –≤ Redis  

---

## **3. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞**  
1. **–î–∏–∞–≥—Ä–∞–º–º—ã:**  
   - C4-–º–æ–¥–µ–ª—å (Context, Containers, Components, Code)  
   - Mermaid.js –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏  
2. **–®–∞–±–ª–æ–Ω—ã:**  
   - Saga Pattern –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
   - CQRS –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏  
3. **–û—Ü–µ–Ω–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏:**  
   - –†–∞—Å—á–µ—Ç RPS (Requests Per Second)  
   - Load testing (Locust)  

---

## **4. –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ**  
**–ó–∞–¥–∞—á–∞:** –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–∞–Ω–∞–ª–æ–≥ Twitch):  
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏  
3. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è:  
   - –¢—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –≤–∏–¥–µ–æ  
   - –ß–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞  

**–§–æ—Ä–º–∞—Ç:** –î–∏–∞–≥—Ä–∞–º–º–∞ Mermaid + –ø–æ—è—Å–Ω–µ–Ω–∏—è –Ω–∞ 1 —Å—Ç—Ä–∞–Ω–∏—Ü—É A4.  

---

## **5. –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã**  
- –ö–Ω–∏–≥–∞: "Designing Data-Intensive Applications" (Martin Kleppmann)  
- –ö—É—Ä—Å: "System Design Interview" (Alex Xu)  
- –®–∞–±–ª–æ–Ω—ã: https://microservices.io/patterns/  

üöÄ –í—ã –Ω–∞—É—á–∏–ª–∏—Å—å –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏!
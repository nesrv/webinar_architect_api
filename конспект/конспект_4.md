# üéØ JSON-RPC: –ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤ —á–∏—Å—Ç–æ–º –≤–∏–¥–µ

## ü§î –ß—Ç–æ –∑–∞ –∑–≤–µ—Ä—å —Ç–∞–∫–æ–π JSON-RPC?

**JSON-RPC** = **J**SON **R**emote **P**rocedure **C**all

–ö–æ—Ä–æ—á–µ, —ç—Ç–æ —Å–ø–æ—Å–æ–± –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Ç–∞–∫, –±—É–¥—Ç–æ –æ–Ω–∏ —É —Ç–µ–±—è –ª–æ–∫–∞–ª—å–Ω–æ. –ù–∏–∫–∞–∫–∏—Ö REST-–∑–∞–º–æ—Ä–æ—á–µ–∫ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ HTTP-–º–µ—Ç–æ–¥–∞–º–∏ - –ø—Ä–æ—Å—Ç–æ "–≤—ã–∑–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏—é `add(2, 3)` –Ω–∞ —Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ".

### üçï –ê–Ω–∞–ª–æ–≥–∏—è —Å –ø–∏—Ü—Ü–µ—Ä–∏–µ–π (–æ–ø—è—Ç—å!)
- **–¢—ã**: "–≠–π, —Å–¥–µ–ª–∞–π –º–Ω–µ –ø–∏—Ü—Ü—É —Å –ø–µ–ø–ø–µ—Ä–æ–Ω–∏!" (–≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞)
- **–ü–æ–≤–∞—Ä**: "–ì–æ—Ç–æ–≤–æ, –¥–µ—Ä–∂–∏ –ø–∏—Ü—Ü—É!" (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
- **JSON-RPC**: –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ –º–µ–∂–¥—É —Ç–æ–±–æ–π –∏ –ø–æ–≤–∞—Ä–æ–º

## üöÄ –ó–∞—á–µ–º –Ω—É–∂–µ–Ω JSON-RPC?

### 1. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞**
–ù–∏–∫–∞–∫–∏—Ö –∑–∞–º–æ—Ä–æ—á–µ–∫ —Å REST-—Ä–µ—Å—É—Ä—Å–∞–º–∏. –ü—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—à—å –º–µ—Ç–æ–¥—ã:

```json
// –ó–∞–ø—Ä–æ—Å: "–í—ã–ø–æ–ª–Ω–∏ add(2, 3)"
{
  "jsonrpc": "2.0",
  "method": "add",
  "params": [2, 3],
  "id": 1
}

// –û—Ç–≤–µ—Ç: "–†–µ–∑—É–ª—å—Ç–∞—Ç: 5"
{
  "jsonrpc": "2.0", 
  "result": 5,
  "id": 1
}
```

### 2. **–ö–æ–º–∞–Ω–¥–Ω—ã–π —Å—Ç–∏–ª—å API**
REST —Ö–æ—Ä–æ—à –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤ (`/users`, `/posts`), –Ω–æ —á—Ç–æ –µ—Å–ª–∏ —Ç–≤–æ–π API - —ç—Ç–æ –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥?

```json
// –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤ JSON-RPC
{"method": "calculateTax", "params": {"income": 50000}}
{"method": "sendEmail", "params": {"to": "user@example.com"}}
{"method": "validateCreditCard", "params": {"number": "1234..."}}

// –ù–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤ REST
POST /tax-calculations
POST /emails  
POST /credit-card-validations
```

### 3. **–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ HTTP**
REST –∂–µ–Ω–∞—Ç –Ω–∞ HTTP, –∞ JSON-RPC –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≥–¥–µ —É–≥–æ–¥–Ω–æ:
- **HTTP** - –∫–ª–∞—Å—Å–∏–∫–∞
- **WebSockets** - –¥–ª—è real-time
- **TCP** - –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- **Message queues** - –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

## üéÆ –ì–¥–µ JSON-RPC —Ä—É–ª–∏—Ç?

### üîó –ë–ª–æ–∫—á–µ–π–Ω (–≥–ª–∞–≤–Ω–∞—è —Ç—É—Å–æ–≤–∫–∞)
Ethereum, Bitcoin, –≤—Å–µ –∫—Ä–∏–ø—Ç–æ-–Ω–æ–¥—ã –≥–æ–≤–æ—Ä—è—Ç –Ω–∞ JSON-RPC:

```json
// –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –≤ Ethereum
{
  "jsonrpc": "2.0",
  "method": "eth_sendTransaction",
  "params": [{
    "from": "0xabc...",
    "to": "0xdef...", 
    "value": "0x1000"
  }],
  "id": 1
}
```

### üè≠ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
–ö–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã:

```json
// –°–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤ ‚Üí –°–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π
{
  "method": "processPayment",
  "params": {"orderId": 123, "amount": 99.99}
}
```

### üéØ IoT –∏ —É–º–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
–î–∞—Ç—á–∏–∫–∏, —Ä–æ–±–æ—Ç—ã, —É–º–Ω—ã–µ –ª–∞–º–ø–æ—á–∫–∏:

```json
// –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç –≤ –≥–æ—Å—Ç–∏–Ω–æ–π
{
  "method": "turnOnLight",
  "params": {"room": "living_room", "brightness": 80}
}
```

### üéÆ –ò–≥—Ä—ã –∏ real-time
Multiplayer –∏–≥—Ä—ã —á–µ—Ä–µ–∑ WebSocket:

```json
// –ò–≥—Ä–æ–∫ –¥–≤–∏–≥–∞–µ—Ç—Å—è
{
  "method": "movePlayer", 
  "params": {"x": 100, "y": 200, "direction": "north"}
}
```

## üî• –§–∏—à–∫–∏ JSON-RPC

### 1. **Batch –∑–∞–ø—Ä–æ—Å—ã** (–ø–∞–∫–µ—Ç–Ω—ã–µ)
–ú–æ–∂–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ –∑–∞ —Ä–∞–∑:

```json
[
  {"method": "getUser", "params": [1], "id": 1},
  {"method": "getUserPosts", "params": [1], "id": 2},
  {"method": "getUserFriends", "params": [1], "id": 3}
]
```

–í REST –ø—Ä–∏—à–ª–æ—Å—å –±—ã –¥–µ–ª–∞—Ç—å 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞!

### 2. **Notifications** (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
–ó–∞–ø—Ä–æ—Å—ã –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ (—É–±–∏—Ä–∞–µ—à—å `id`):

```json
// –ü—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ, –æ—Ç–≤–µ—Ç –Ω–µ –Ω—É–∂–µ–Ω
{
  "jsonrpc": "2.0",
  "method": "logUserAction",
  "params": {"action": "click", "button": "subscribe"}
}
```

### 3. **–õ—é–±—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤**
–í REST —Ç—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω HTTP-–º–µ—Ç–æ–¥–∞–º–∏, –≤ JSON-RPC - –ø–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞:

```json
{"method": "doMagic"}
{"method": "calculateWorldDomination"} 
{"method": "makeItRain"}
{"method": "fixEverything"}
```

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ Python (aiohttp):

```python
from aiohttp import web
import json

# –ù–∞—à–∏ –º–µ—Ç–æ–¥—ã
async def add_numbers(params):
    return params[0] + params[1]

async def get_user(params):
    user_id = params.get("id")
    return {"id": user_id, "name": "Alice", "status": "awesome"}

async def send_email(params):
    # –¢—É—Ç –±—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ email
    return {"status": "sent", "to": params["email"]}

# –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
@routes.post("/rpc")
async def rpc_handler(request):
    data = await request.json()
    
    methods = {
        "add": add_numbers,
        "getUser": get_user, 
        "sendEmail": send_email
    }
    
    method_name = data.get("method")
    params = data.get("params", [])
    rpc_id = data.get("id")
    
    if method_name not in methods:
        return web.json_response({
            "jsonrpc": "2.0",
            "error": {"code": -32601, "message": "Method not found"},
            "id": rpc_id
        })
    
    try:
        result = await methods[method_name](params)
        return web.json_response({
            "jsonrpc": "2.0",
            "result": result,
            "id": rpc_id
        })
    except Exception as e:
        return web.json_response({
            "jsonrpc": "2.0", 
            "error": {"code": -32603, "message": str(e)},
            "id": rpc_id
        })

app = web.Application()
app.router.add_post("/rpc", rpc_handler)
web.run_app(app, port=8080)
```

### –ö–ª–∏–µ–Ω—Ç –Ω–∞ JavaScript:

```javascript
async function callRPC(method, params) {
    const response = await fetch('/rpc', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            jsonrpc: '2.0',
            method: method,
            params: params,
            id: Date.now()
        })
    });
    
    const result = await response.json();
    return result.result;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const sum = await callRPC('add', [5, 3]);
const user = await callRPC('getUser', {id: 123});
```

## üÜö JSON-RPC vs –û—Å—Ç–∞–ª—å–Ω—ã–µ

| –ö—Ä–∏—Ç–µ—Ä–∏–π | JSON-RPC | REST | GraphQL | gRPC |
|----------|----------|------|---------|------|
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞** | üü¢ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | üü° –°—Ä–µ–¥–Ω—è—è | üî¥ –°–ª–æ–∂–Ω–∞—è | üü° –°—Ä–µ–¥–Ω—è—è |
| **–†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π** | üü¢ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π | üü° –°—Ä–µ–¥–Ω–∏–π | üî¥ –ë–æ–ª—å—à–æ–π | üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π |
| **–ì–∏–±–∫–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤** | üü¢ –õ—é–±—ã–µ | üî¥ HTTP —Ç–æ–ª—å–∫–æ | üü° Query/Mutation | üü¢ –õ—é–±—ã–µ |
| **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** | üî¥ –°–ª–æ–∂–Ω–æ–µ | üü¢ HTTP Cache | üî¥ –°–ª–æ–∂–Ω–æ–µ | üî¥ –°–ª–æ–∂–Ω–æ–µ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | üî¥ –†—É—á–Ω–∞—è | üü¢ OpenAPI | üü¢ Introspection | üü¢ Protobuf |
| **–ë—Ä–∞—É–∑–µ—Ä—ã** | üü¢ –î–∞ | üü¢ –î–∞ | üü¢ –î–∞ | üî¥ –ù–µ—Ç |

## üö® –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JSON-RPC

### ‚ùå –ü—É–±–ª–∏—á–Ω—ã–µ REST API
–ï—Å–ª–∏ –¥–µ–ª–∞–µ—à—å API –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –æ–Ω–∏ –æ–∂–∏–¥–∞—é—Ç REST:

```bash
# –û–∂–∏–¥–∞—é—Ç
GET /api/users/123
POST /api/users

# –ê –Ω–µ
POST /rpc {"method": "getUser", "params": [123]}
```

### ‚ùå –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ HTTP –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
REST –∑–∞–ø—Ä–æ—Å—ã –º–æ–∂–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –ø–æ URL, JSON-RPC - —Å–ª–æ–∂–Ω–µ–µ.

### ‚ùå –†–µ—Å—É—Ä—Å-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API
–ï—Å–ª–∏ —Ç–≤–æ–π API —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∑–∞–∫–∞–∑—ã, —Ç–æ–≤–∞—Ä—ã), REST –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ.

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ JSON-RPC

```
1. –¢–≤–æ–π API –∫–æ–º–∞–Ω–¥–Ω—ã–π (–∞ –Ω–µ —Ä–µ—Å—É—Ä—Å–Ω—ã–π)?
   ‚îú‚îÄ –î–∞ ‚Üí JSON-RPC –ø–æ–¥—Ö–æ–¥–∏—Ç
   ‚îî‚îÄ –ù–µ—Ç ‚Üí –ª—É—á—à–µ REST

2. –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞?
   ‚îú‚îÄ –î–∞ ‚Üí JSON-RPC
   ‚îî‚îÄ –ù–µ—Ç ‚Üí –º–æ–∂–Ω–æ REST/GraphQL

3. –†–∞–±–æ—Ç–∞–µ—à—å —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º/IoT?
   ‚îú‚îÄ –î–∞ ‚Üí JSON-RPC (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–µ-—Ñ–∞–∫—Ç–æ)
   ‚îî‚îÄ –ù–µ—Ç ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º

4. –ù—É–∂–Ω—ã batch –∑–∞–ø—Ä–æ—Å—ã?
   ‚îú‚îÄ –î–∞ ‚Üí JSON-RPC
   ‚îî‚îÄ –ù–µ—Ç ‚Üí REST –ø—Ä–æ—â–µ

5. API –ø—É–±–ª–∏—á–Ω—ã–π –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤?
   ‚îú‚îÄ –î–∞ ‚Üí REST (–æ–∂–∏–¥–∞–Ω–∏—è —Ä—ã–Ω–∫–∞)
   ‚îî‚îÄ –ù–µ—Ç ‚Üí JSON-RPC –º–æ–∂–Ω–æ
```

## üîÆ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã

### JSON-RPC 2.0 over WebSocket
Real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç JSON-RPC —á–µ—Ä–µ–∑ WebSocket:

```javascript
const ws = new WebSocket('ws://localhost:8080/rpc');

ws.send(JSON.stringify({
    jsonrpc: '2.0',
    method: 'subscribeToUpdates',
    params: {channel: 'user-123'},
    id: 1
}));
```

### Hybrid –ø–æ–¥—Ö–æ–¥—ã
- REST –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
- JSON-RPC –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- GraphQL –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

## üé™ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### Python:
- **`json-rpc`** - –ø—Ä–æ—Å—Ç–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **`aiohttp-json-rpc`** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- **`jsonrpcserver`** - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–µ—Ä–≤–µ—Ä

### JavaScript:
- **`jsonrpc-client`** - –∫–ª–∏–µ–Ω—Ç
- **`web3.js`** - –¥–ª—è Ethereum
- **`node-json-rpc`** - —Å–µ—Ä–≤–µ—Ä –Ω–∞ Node.js

### –î—Ä—É–≥–∏–µ —è–∑—ã–∫–∏:
- **Go**: `gorilla/rpc`
- **PHP**: `jsonrpc/server`
- **Java**: `jsonrpc4j`

## ü§ì –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**JSON-RPC –∏–¥–µ–∞–ª–µ–Ω –∫–æ–≥–¥–∞:**
- ‚úÖ –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–æ—Ç–∞
- ‚úÖ API –∫–æ–º–∞–Ω–¥–Ω—ã–π (–Ω–µ —Ä–µ—Å—É—Ä—Å–Ω—ã–π)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—à—å —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º/IoT
- ‚úÖ –ù—É–∂–Ω—ã batch –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –•–æ—á–µ—à—å –≥–∏–±–∫–æ—Å—Ç—å –≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ

**JSON-RPC –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞:**
- ‚ùå –ü—É–±–ª–∏—á–Ω—ã–π API (–æ–∂–∏–¥–∞—é—Ç REST)
- ‚ùå –ù—É–∂–Ω–æ HTTP –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –†–µ—Å—É—Ä—Å-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API
- ‚ùå –ù—É–∂–Ω–∞ –±–æ–≥–∞—Ç–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: JSON-RPC - —ç—Ç–æ –º–æ–ª–æ—Ç–æ–∫. –ï—Å–ª–∏ —Ç–≤–æ—è –ø—Ä–æ–±–ª–µ–º–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –≥–≤–æ–∑–¥—å (–ø—Ä–æ—Å—Ç—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π), —Ç–æ —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç!

---

*P.S. –í –º–∏—Ä–µ –±–ª–æ–∫—á–µ–π–Ω–∞ JSON-RPC - —ç—Ç–æ –∫–æ—Ä–æ–ª—å. –ï—Å–ª–∏ –¥–µ–ª–∞–µ—à—å —á—Ç–æ-—Ç–æ —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å –∫—Ä–∏–ø—Ç–æ–π, –∏–∑—É—á–∞–π –µ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!* üöÄ
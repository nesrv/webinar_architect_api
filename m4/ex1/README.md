# JSON-RPC API - –£—á–µ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –û–ø–∏—Å–∞–Ω–∏–µ
JSON-RPC - —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä (RPC), –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π JSON –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ—Å—Ç–æ–π –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
m4/ex1/
‚îú‚îÄ‚îÄ server.py           # –ë–∞–∑–æ–≤—ã–π JSON-RPC —Å–µ—Ä–≤–µ—Ä (—Ç–æ–ª—å–∫–æ POST)
‚îú‚îÄ‚îÄ server_with_get.py  # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (POST + GET)
‚îî‚îÄ‚îÄ client.py           # –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

## –ó–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install aiohttp jsonrpcserver jsonrpcclient
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ë–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
python server.py

# –ò–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
python server_with_get.py
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
```bash
python client.py
```

## API –º–µ—Ç–æ–¥—ã

### add(a, b)
–°–∫–ª–∞–¥—ã–≤–∞–µ—Ç –¥–≤–∞ —á–∏—Å–ª–∞
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `a` (—á–∏—Å–ª–æ), `b` (—á–∏—Å–ª–æ)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: —Å—É–º–º–∞ —á–∏—Å–µ–ª

### get_user(user_id)
–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `user_id` (—á–∏—Å–ª–æ)
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: –æ–±—ä–µ–∫—Ç —Å `id` –∏ `name`

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### POST –∑–∞–ø—Ä–æ—Å (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π JSON-RPC)
```bash
curl -X POST http://localhost:5000/rpc \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc": "2.0", "method": "add", "params": [2, 3], "id": 1}'
```

**–û—Ç–≤–µ—Ç:**
```json
{"jsonrpc": "2.0", "result": 5, "id": 1}
```

### GET –∑–∞–ø—Ä–æ—Å (—Ç–æ–ª—å–∫–æ server_with_get.py)
```bash
# –ú–µ—Ç–æ–¥ add
curl "http://localhost:5000/rpc?method=add&params[]=2&params[]=3&id=1"

# –ú–µ—Ç–æ–¥ get_user
curl "http://localhost:5000/rpc?method=get_user&params[]=2&id=2"
```

## –§–æ—Ä–º–∞—Ç JSON-RPC 2.0

### –ó–∞–ø—Ä–æ—Å
```json
{
  "jsonrpc": "2.0",
  "method": "method_name",
  "params": [param1, param2],
  "id": 1
}
```

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "jsonrpc": "2.0",
  "result": "result_value",
  "id": 1
}
```

### –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π
```json
{
  "jsonrpc": "2.0",
  "error": {
    "code": -32601,
    "message": "Method not found"
  },
  "id": 1
}
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### server.py
- –¢–æ–ª—å–∫–æ POST –∑–∞–ø—Ä–æ—Å—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è JSON-RPC
- –ü–æ—Ä—Ç: 5000

### server_with_get.py
- POST –∏ GET –∑–∞–ø—Ä–æ—Å—ã
- GET –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ JSON-RPC —Ñ–æ—Ä–º–∞—Ç
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–æ–≤ —á–µ—Ä–µ–∑ `params[]`

### client.py
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ jsonrpcclient

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl –∏–ª–∏ Postman –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON-RPC 2.0



–≠—Ç–æ—Ç –∫–æ–¥ ‚Äî **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π JSON-RPC —Å–µ—Ä–≤–µ—Ä** –Ω–∞ –±–∞–∑–µ `aiohttp` (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python) –∏ `jsonrpcserver` (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON-RPC 2.0 –∑–∞–ø—Ä–æ—Å–æ–≤). –û–Ω —Å–ª—É—à–∞–µ—Ç POST-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `/rpc` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º **–ø–æ—à–∞–≥–æ–≤–æ**:

---

### üîß –ò–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫

```python
from aiohttp import web
from jsonrpcserver import method, async_dispatch
```

* `aiohttp.web` ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö HTTP-—Å–µ—Ä–≤–µ—Ä–æ–≤.
* `jsonrpcserver.method` ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –∫–∞–∫ –º–µ—Ç–æ–¥–æ–≤ JSON-RPC.
* `async_dispatch` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ JSON-RPC –∑–∞–ø—Ä–æ—Å–æ–≤.

---


### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π —Å—Ö–µ–º—ã

* –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π JSON-RPC —Å–µ—Ä–≤–µ—Ä –∑–∞ \~20 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞.
* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –º–æ–∂–Ω–æ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.
* –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ JSON-RPC 2.0 (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç "—Ä—É—á–Ω—ã—Ö" REST API).



curl.exe "http://localhost:5000/rpc?method=add&params[]=2&params[]=3&id=1"

curl.exe "http://localhost:5000/rpc?method=get_user&params[]=2&id=2"


### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FastAPI —Å JSON-RPC API:**

FastAPI ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è RESTful –∏ GraphQL API –Ω–∞ Python. –ù–æ –º–æ–∂–Ω–æ –ª–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è JSON-RPC API? –î–∞, –Ω–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –æ–≥–æ–≤–æ—Ä–∫–∞–º–∏.  

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º **–ø–ª—é—Å—ã**, **–º–∏–Ω—É—Å—ã** –∏ **–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**.

---

## **1. FastAPI + JSON-RPC: –ü–ª—é—Å—ã**  

### **1.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger/OpenAPI)**  
FastAPI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç **Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.  
–ï—Å–ª–∏ –æ–±–µ—Ä–Ω—É—Ç—å JSON-RPC –º–µ—Ç–æ–¥—ã –≤ FastAPI, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —É–¥–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API.  

–ü—Ä–∏–º–µ—Ä:  
```python
from fastapi import FastAPI
from jsonrpcserver import method, async_dispatch

app = FastAPI()

@method
async def add(a: int, b: int) -> int:
    return a + b

@app.post("/rpc")
async def handle_rpc(request: dict):
    response = await async_dispatch(request)
    return response

# –¢–µ–ø–µ—Ä—å –≤ Swagger (/docs) –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ, —á—Ç–æ –µ—Å—Ç—å POST /rpc
```
**–ü–ª—é—Å:**  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (`/rpc`).  

**–ú–∏–Ω—É—Å:**  
‚ùå –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–∞–º–∏ JSON-RPC –º–µ—Ç–æ–¥—ã (`add`, `get_user` –∏ —Ç.–¥.).  

---

### **1.2 –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Pydantic)**  
FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Pydantic**, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.  

–ü—Ä–∏–º–µ—Ä:  
```python
from pydantic import BaseModel

class AddRequest(BaseModel):
    a: int
    b: int

@app.post("/add")
async def add_rpc(request: AddRequest):
    return {"result": request.a + request.b}
```
**–ü–ª—é—Å:**  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞.  

**–ú–∏–Ω—É—Å:**  
‚ùå –≠—Ç–æ —É–∂–µ –Ω–µ —á–∏—Å—Ç—ã–π JSON-RPC, –∞ –≥–∏–±—Ä–∏–¥ REST + JSON-RPC.  

---

### **1.3 –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (AsyncIO)**  
FastAPI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –∫–∞–∫ –∏ `jsonrpcserver`.  

**–ü–ª—é—Å:**  
‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `async`/`await` –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö API.  

---

## **2. FastAPI + JSON-RPC: –ú–∏–Ω—É—Å—ã**  

### **2.1 –ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è JSON-RPC**  
FastAPI –∑–∞—Ç–æ—á–µ–Ω –ø–æ–¥ **REST/GraphQL**, –∞ JSON-RPC ‚Äî —ç—Ç–æ –¥—Ä—É–≥–æ–π —Å—Ç–∏–ª—å:  
- –í REST –º–µ—Ç–æ–¥—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ **HTTP-–≥–ª–∞–≥–æ–ª—ã** (`GET`, `POST`).  
- –í JSON-RPC –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ JSON-—Ç–µ–ª–∞**.  

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**  
```python
@app.post("/rpc")
async def handle_rpc(request: dict):
    # FastAPI –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã –µ—Å—Ç—å –≤ JSON-RPC
    return await async_dispatch(request)
```
üëâ Swagger –Ω–µ –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `add` –∏–ª–∏ `get_user`.  

---

### **2.2 –ù–µ—Ç –Ω–∞—Ç–∏–≤–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ JSON-RPC**  
FastAPI –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ JSON-RPC —Ä–æ—É—Ç–µ—Ä–∞ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `jsonrpcserver`).  

**–ü—Ä–∏–¥–µ—Ç—Å—è:**  
- –õ–∏–±–æ –ø–∏—Å–∞—Ç—å –æ–±–µ—Ä—Ç–∫—É –≤—Ä—É—á–Ω—É—é.  
- –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (REST + JSON-RPC).  

---

### **2.3 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–ª—å–∑–∞ –æ—Ç —Ñ–∏—á FastAPI**  
- **Dependency Injection** ‚Äì –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω, —Ç.–∫. –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `jsonrpcserver`.  
- **Background Tasks** ‚Äì —Å–ª–æ–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å.  
- **Middleware** ‚Äì –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–æ –ø—Ä–æ—â–µ –≤ —á–∏—Å—Ç–æ–º JSON-RPC.  

---

## **3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã: –∫–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±—Ä–∞—Ç—å?**  

| **–ö—Ä–∏—Ç–µ—Ä–∏–π**               | **–ß–∏—Å—Ç—ã–π JSON-RPC** (`jsonrpcserver`) | **FastAPI + JSON-RPC** | **FastAPI (REST/GraphQL)** |
|----------------------------|--------------------------------------|-----------------------|---------------------------|
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞**               | ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ                | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è           | ‚ùå –°–ª–æ–∂–Ω–µ–µ (—Ä–æ—É—Ç—ã, —Å—Ö–µ–º—ã) |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**           | ‚ùå –ù–µ—Ç Swagger                       | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è `/rpc`  | ‚úÖ –ü–æ–ª–Ω–∞—è (OpenAPI)       |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è**              | ‚ùå –í—Ä—É—á–Ω—É—é                          | ‚úÖ –ß–µ—Ä–µ–∑ Pydantic     | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è         |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON-RPC**     | ‚úÖ –ü–æ–ª–Ω–∞—è                           | ‚ö†Ô∏è –ß–µ—Ä–µ–∑ –æ–±–µ—Ä—Ç–∫—É     | ‚ùå –ù–µ—Ç                    |
| **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**          | ‚úÖ –î–∞                               | ‚úÖ –î–∞                 | ‚úÖ –î–∞                     |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**          | –ë–ª–æ–∫—á–µ–π–Ω, IoT, RPC-—Å–µ—Ä–≤–∏—Å—ã          | –ì–∏–±—Ä–∏–¥–Ω—ã–µ API         | –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –≤–µ–±-API      |

---

## **4. –í—ã–≤–æ–¥: –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FastAPI —Å JSON-RPC?**  

### **‚úÖ –î–∞, –µ—Å–ª–∏:**  
- –ù—É–∂–Ω–∞ **–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger** (–¥–∞–∂–µ –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è `/rpc`).  
- –•–æ—á–µ—Ç—Å—è **–≥–∏–±—Ä–∏–¥–Ω—ã–π API** (—á–∞—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤ ‚Äî REST, —á–∞—Å—Ç—å ‚Äî JSON-RPC).  
- –¢—Ä–µ–±—É–µ—Ç—Å—è **–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** (Pydantic).  

### **‚ùå –ù–µ—Ç, –µ—Å–ª–∏:**  
- –ù—É–∂–µ–Ω **—á–∏—Å—Ç—ã–π JSON-RPC** (–ª—É—á—à–µ `jsonrpcserver`).  
- API **—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –≤–∞–∂–Ω–∞).  
- –•–æ—á–µ—Ç—Å—è **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (–º–∏–Ω–∏–º—É–º –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤).  

### **–õ—É—á—à–∏–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å:**  
```python
from fastapi import FastAPI
from jsonrpcserver import method, async_dispatch

app = FastAPI()

@method
async def add(a: int, b: int) -> int:
    return a + b

@app.post("/rpc")
async def handle_rpc(request: dict):
    return await async_dispatch(request)
```
üëâ **FastAPI** –¥–ª—è HTTP-–æ–±–µ—Ä—Ç–∫–∏, **jsonrpcserver** ‚Äî –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ RPC.  

---
### **–ò—Ç–æ–≥**  
FastAPI –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å JSON-RPC, –Ω–æ —ç—Ç–æ **–Ω–µ –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–∞–≤–¥–∞–Ω–æ**.  
- –î–ª—è **—á–∏—Å—Ç–æ–≥–æ JSON-RPC** –ª—É—á—à–µ `jsonrpcserver`.  
- –î–ª—è **REST/GraphQL** ‚Äî FastAPI –∏–¥–µ–∞–ª–µ–Ω.  
- –î–ª—è **–≥–∏–±—Ä–∏–¥–Ω—ã—Ö API** ‚Äî –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å.  

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω **–ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π JSON-RPC API**, FastAPI –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º. üöÄ